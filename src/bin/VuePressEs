#!/usr/bin/env node
const program = require('commander') // æ ¸å¿ƒå‘½ä»¤è¡Œå·¥å…·
const ora = require('ora') // loadingæ¨¡å—
const shelljs = require('shelljs'); // å‰ç«¯å†™shell
const fs = require('fs');
const path = require('path');

// éå†æ–‡ä»¶çš„æ—¶å€™æ˜¯è¦æœ‰é»‘åå•çš„ ===> .å¼€å¤´çš„éšè—æ–‡ä»¶ä¸éå†ï¼Œnode_modulesï¼Œbuild æ–‡ä»¶å¤¹ ä¸éå†
// é¦–å…ˆç”Ÿæˆ çœŸå®æ–‡ä»¶å¯¹è±¡æ ‘ ç”¨äºç”Ÿæˆ vpe.config.json
// æ ¹æ® vpe.config.json ç”Ÿæˆ è§„å®šæ–‡ä»¶å¯¹è±¡æ ‘

// ç”¨æˆ·æ²¡æœ‰ç”Ÿæˆé…ç½®æ–‡ä»¶ vpe.config.json çš„æƒ…å†µä¸‹ï¼Œå°±éœ€è¦èµ°é»˜è®¤é…ç½®


// å…¨å±€
let dirPath = shelljs.pwd().stdout
let stat = fs.stat;
let dirObjTree = readDirToObjTree() // éå†æ‰€æœ‰çš„æ–‡ä»¶å¤¹ ---> ç”Ÿæˆ æ–‡ä»¶çœŸå®å¯¹è±¡æ ‘
let vpeConfigObj = getVpeConfig(); // é…ç½®å¯¹è±¡


// ===================================================
// ============== ** npmæ ¸å¿ƒå‘½ä»¤éƒ¨åˆ† ** ================
// ===================================================

programConfigFn() // æ ¸å¿ƒå‘½ä»¤è¡Œé…ç½®å‡½æ•°å¯åŠ¨

// æ ¸å¿ƒå‘½ä»¤è¡Œé…ç½®å‡½æ•°
function programConfigFn () {
    
    // -v ç‰ˆæœ¬
    program.version('v1.2.1', "-v, --version")
    // -h å¸®åŠ©
    program.on('--help', () => { console.log(helpTitleFu()) });

    program
        .usage("[cmd] <options>")
        .arguments('<cmd> [env]')
        .action( (cmd, otherParms) => {
            let header = binHeaderFn(cmd)
            typeof header === 'undefined' ? process.exit(1) : header()
        })

    program.parse(process.argv)
}

// å‘½ä»¤é›†åˆå‡½æ•°
function binHeaderFn (cmd) {
    
    let binHeader = {

        init () {
            console.log('ç”Ÿæˆä¸€ä¸ªåˆå§‹åŒ–é¡¹ç›®ï¼ˆåŠŸèƒ½æš‚æœªå¼€æ”¾ï¼‰')
        },

        serve () {
            
            createVuePressInit(dirObjTree) // æ ¹æ®æ–‡ä»¶å¯¹è±¡æ ‘ï¼Œç”ŸæˆVuePressè§„åˆ™

            const spinner = ora('vpeæ­£åœ¨å¯åŠ¨é¢„è§ˆåŠŸèƒ½...')
            spinner.start()

            // æš‚åœ 1sï¼Œä¸»è¦æ˜¯æœ‰ä¸ªåŠ è½½çŠ¶æ€ï¼Œè£…Bç”¨ ğŸ˜¸
            setTimeout(() => {
                shelljs.exec('npx vuepress dev build') // æ‰§è¡Œshè„šæœ¬
                spinner.stop()
            }, 1000)
        },

        build () {

            createVuePressInit(dirObjTree) // æ ¹æ®æ–‡ä»¶å¯¹è±¡æ ‘ï¼Œç”ŸæˆVuePressè§„åˆ™

            const spinner = ora('vpeæ­£åœ¨ç¼–è¯‘ä¸­ï¼ˆç¼–è¯‘åçš„æ–‡ä»¶åœ¨ build/.vuepress/dist ä¸­ï¼‰')
            spinner.start()

            // æš‚åœ 1sï¼Œä¸»è¦æ˜¯æœ‰ä¸ªåŠ è½½çŠ¶æ€ï¼Œè£…Bç”¨ ğŸ˜¸
            setTimeout(() => {
                shelljs.exec('npx vuepress build build') // æ‰§è¡Œshè„šæœ¬
                spinner.stop()
            }, 1000)
            
        },

        config () {
            const spinner = ora('vpeæ­£åœ¨åˆ›å»ºä¸‰ä¸ªé…ç½®æ–‡ä»¶...')
            spinner.start()

            // æš‚åœ 1sï¼Œä¸»è¦æ˜¯æœ‰ä¸ªåŠ è½½çŠ¶æ€ï¼Œè£…Bç”¨ ğŸ˜¸
            setTimeout(() => {
                createHomeFn()
                createRecordFn()
                createConfigFn()
                spinner.stop()
            }, 1000)
        },

        look () {
            console.log('æŸ¥çœ‹æœ€æ–°ç‰ˆæœ¬æ›´æ–°çš„APIï¼ˆåŠŸèƒ½æš‚æœªå¼€æ”¾ï¼‰')
        }
    
    }

    return binHeader[cmd]
}


// ===================================================
// =============== ** config å‘½ä»¤ ** =================
// ===================================================

// åˆ›å»º HOME.md çš„å‡½æ•°
function createHomeFn() {
    fs.writeFileSync(`${dirPath}/ZHOME.md`, homeTileFn())
}

// åˆ›å»º RECORD.md çš„å‡½æ•°
function createRecordFn() {
    fs.writeFileSync(`${dirPath}/ZRECORD.md`, recordFn())
}

// åˆ›å»º vpe.config.json çš„å‡½æ•°
function createConfigFn() {
    fs.writeFileSync(`${dirPath}/vpe.config.json`, vpeConfigFn())
}

// ç”Ÿæˆ vpe.config.json å†…å®¹
function vpeConfigFn () {

    let folderShowOrder = createFolderShowOrder()

return `{
    // å·¦ä¸Šè§’çš„æ ‡é¢˜ï¼ˆä¹Ÿæ˜¯é¦–é¡µå›¾åƒä¸‹é¢çš„ä¸€çº§æ ‡é¢˜ï¼‰
    "title": "åœ¨vpe.config.json ä¸­ é…ç½® title",
    // é¦–é¡µå¤´åƒä¸‹é¢æ ‡é¢˜çš„è§£é‡Š
    "description": "åœ¨vpe.config.json ä¸­ é…ç½® description",
    // å³ä¸Šè§’ è·³è½¬GitHubçš„åœ°å€ï¼ˆå†™ä¸€ä¸ªGitHubé¡¹ç›®åœ°å€ï¼‰
    "repo": "https://github.com/itz2019/vuepress-es",

    // è®¾ç½®ä¾§è¾¹æ æ˜¯å¦å…¨éƒ¨é»˜è®¤å±•å¼€ï¼ˆä¸€èˆ¬å®˜æ–¹ä»‹ç»ç»å¸¸ä½¿ç”¨è¿™ä¸ªï¼‰
    "collapsable": true, // æ³¨æ„ï¼šfalse æ˜¯å±•å¼€ï¼Œtrue æ˜¯ä¸å±•å¼€
    // ä»£ç å—æ˜¯å¦æ˜¾ç¤ºè¡Œå·
    "lineNumbers": false,

    // æ–‡ä»¶å¤¹å±•ç¤ºé¡ºåºï¼ˆæœ‰éœ€æ±‚å°±è¿›è¡Œè®¾ç½®ï¼Œä¸ä»…å¯ä»¥è®¾ç½®éœ€è¦æ˜¾ç¤ºçš„æ–‡ä»¶å¤¹ï¼Œè¿˜èƒ½è®¾ç½®å±•ç¤ºçš„é¡ºåºï¼Œè¿™é‡Œå¯èƒ½æœ‰ç‚¹ç»•ï¼‰
    "folderShowOrder": [
        ${folderShowOrder}
    ]
}`
}

// ç”Ÿæˆ è§„å®šæ–‡ä»¶å¯¹è±¡æ ‘ï¼ˆæ ¸å¿ƒï¼‰
function createFolderShowOrder () {
    // é¦–å…ˆè¦éå†æ‰€æœ‰çš„æ–‡ä»¶å¤¹ï¼ˆå»é™¤ node_modules && buildï¼‰
    
    let objStr = ''
    let childrenFolderStr = ''

    // é¦–å…ˆéœ€è¦éå†æ–‡ä»¶å¯¹è±¡æ ‘ï¼Œæ‹¿åˆ°äºŒçº§ childrenFolder å±æ€§
    dirObjTree.forEach(item => {
        item.data.forEach(jtem => {
            childrenFolderStr += `"${jtem.name}", `
        })
        objStr += `{
            "title": "${item.name}",
            "alias": "ä¸­æ–‡åˆ«å${item.name}",
            "childrenFolder": [${childrenFolderStr}]
        },
        `;
        childrenFolderStr = ''
    })

    return objStr
}

// ===================================================
// =========== ** serve && build å‘½ä»¤ ** =============
// ===================================================

// ç”ŸæˆVuePressè§„åˆ™
function createVuePressInit (objTree) {
    createDist() // åˆ›å»ºæ‰“åŒ…ä¹‹åçš„ç›®å½•
    copyDirFn() // å¤åˆ¶æ–‡ä»¶
    createVuePressConfig() // æ ¹æ®æ–‡ä»¶å¯¹è±¡æ ‘ï¼Œç”ŸæˆVuePressè§„åˆ™
    createBasicFile(objTree) // ç”ŸæˆREADME.md æ–‡ä»¶ï¼Œä¸å†™çš„è¯ä¼šæœ‰é—®é¢˜
}

// 1.åˆ›å»ºæ‰“åŒ…ä¹‹åçš„ç›®å½•build
function createDist () {

    // å¦‚æœæœ‰å’Œæ‰“åŒ…åç§°ä¸€è‡´çš„åç§°ï¼Œå°±å…ˆåˆ é™¤æ‰
    if (fs.existsSync(path.join(dirPath, "build"))) {
        delDir(path.join(dirPath, "build"))
    }

    // åˆ›å»ºç›®å½•
    fs.mkdirSync(path.join(dirPath, "build"))
    fs.mkdirSync(path.join(dirPath, `./build/.vuepress`))
    console.log('1ï¸âƒ£  åˆ›å»ºæ‰“åŒ…æ–‡ä»¶å¤¹æˆåŠŸ')

}

// 2.å¤åˆ¶æ–‡ä»¶å¤¹åˆ°build
function copyDirFn () {
    
    // è¿™é‡Œåº”è¯¥æ ¹æ® è§„å®šæ–‡ä»¶æ ‘ è¿›è¡Œ
    vpeConfigObj.folderShowOrder.forEach(item => {  
        exists(item.title, `${dirPath}/build/${item.title}`, copy)
    })
    console.log('2ï¸âƒ£  å¤åˆ¶æ–‡ä»¶åˆ°buildç›®å½•å®Œæˆ')
}

// 3.ç”ŸæˆVuePressè§„åˆ™
function createVuePressConfig () {

    // è¯»å–é…ç½®é›†åˆ
    let title = getConfig('title', 'åœ¨ vpe.config.json ä¸­é…ç½® title')
    let description = getConfig('description', 'åœ¨ vpe.config.json ä¸­é…ç½® description')
    let repo = getConfig('repo', 'https://github.com/itz2019/vuepress-es')
    let lineNumbers = getConfig('lineNumbers', false)

    let [nav, sidebar] = createNavAndSidebar()

let configStr = `module.exports = {
    title: '${title}',
    description: '${description}',
    head: [
        ['link', { rel: 'icon', href: '/favicon.ico' }]
    ],
    themeConfig: {
        repo: '${repo}',
        //å¯¼èˆª
        nav: [
            ${nav}
        ],
        // ä¾§è¾¹æ 
        sidebar: {
            ${sidebar}
        }
    },
    serviceWorker: true,
    markdown: {
        lineNumbers: ${lineNumbers} // å¼€å¯è¡Œå·
    }
}`;
    fs.writeFileSync(`${dirPath}/build/.vuepress/config.js`, configStr)
    console.log('3ï¸âƒ£  æ ¹æ®æ–‡ä»¶å¯¹è±¡æ ‘ï¼Œç”ŸæˆVuePressè§„åˆ™å®Œæˆ')
}

// 4.ç”ŸæˆREADME.mdæ–‡ä»¶ï¼ˆå¼‚æ­¥ï¼‰
function createBasicFile () {
    
    // åœ¨æ‰“åŒ…æ–‡ä»¶å¤¹æ ¹ç›®å½• ç”Ÿæˆ README.md è¦ä¸ä¼švuepressä¼šäº§ç”Ÿ404
    let homeTile = homeTileFn()
    fs.writeFileSync(`${dirPath}/build/README.md`, homeTile)

    setTimeout(() => {
        // åœ¨æ‰“åŒ…æ–‡ä»¶å¤¹ æ¯ä¸ªåˆ†ç±»æ–‡ä»¶å¤¹ä¸‹ ç”Ÿæˆ README.mdï¼Œå¦åˆ™å†…å®¹æ˜¾ç¤ºä¸å‡ºæ¥
        let record = recordFn()
        vpeConfigObj.folderShowOrder.forEach(item => {
            fs.writeFileSync(`${dirPath}/build/${item.title}/README.md`, record)
        })
        console.log('4ï¸âƒ£  ç”ŸæˆREADME.md æ–‡ä»¶å®Œæˆ')

    }, 100);
}

// è¯»å–é…ç½®ï¼Œå¹¶ä¸”é…ç½®æ²¡æœ‰çš„æ—¶å€™ï¼Œç”Ÿæˆæç¤ºè¯­å¥ï¼ˆå·¥å…·å‡½æ•°ï¼‰
function getConfig (configName, explain) {
    return vpeConfigObj ? vpeConfigObj[configName] : explain
}

// ç”Ÿæˆå¯¼èˆªæ ï¼Œä¾§è¾¹æ ï¼ˆå·¥å…·ç±»ï¼‰
function createNavAndSidebar () {
    // æ ¹æ® æ–‡ä»¶æ˜¾ç¤ºå¯¹è±¡æ ‘ æ¥ç”Ÿæˆï¼ˆå¦‚æœæ²¡æœ‰çš„è¯ï¼Œèµ° æ–‡ä»¶çœŸå®å¯¹è±¡æ ‘ï¼‰

    // æ˜¯å¦æœ‰å¯¹è±¡
    let isFolderShowOrder = getConfig('folderShowOrder', false)

    let nav = ''
    let sidebar = ''
    let collapsable = getConfig('collapsable', true)
    let collapsableStr = collapsable ? '' : "collapsable: false,"

    if (isFolderShowOrder) {

        isFolderShowOrder.forEach(item => {
            
            // 1.ç”Ÿæˆå¯¼èˆª
            nav += `{ text: '${item.alias}', link: '/${item.title}/' },
            `;

            // 2.ç”Ÿæˆä¾§è¾¹æ 

            let twLevel = ''
            item.childrenFolder.forEach(jtem => {

                // è·å–åˆ°ç¬¦åˆçš„æ•°ç»„
                let resData = dirObjTree.filter(ztem => ztem.name == item.title)[0].data.filter(ztem => ztem.name === jtem)[0].data
                
                let children = ''                
                resData.forEach(res => {
                    children += `'${item.title}/${jtem}/${res}',
                            `
                })

                twLevel += `{
                    title: '${jtem}',
                    ${collapsableStr}
                    children: [
                        ${children}
                    ]
                },
                `
            })

            sidebar += `
            '/${item.title}': [
                ${twLevel}
            ],
        `
        })

    } else {

        dirObjTree.forEach(item => {

            // 1.ç”Ÿæˆå¯¼èˆª
            nav += `{ text: '${item.name}', link: '/${item.name}/' },
            `;
    
            // 2.ç”Ÿæˆä¾§è¾¹æ 
            
            // é¦–å…ˆå…ˆå¾ªç¯æœ¬å±‚çš„äºŒçº§ç›®å½•
            let twLevel = ''
            item.data.forEach(jtem => {
    
                let children = ''
                jtem.data.forEach(ztem => {
                    children += `'${item.name}/${jtem.name}/${ztem}',
                            `
                })
    
                twLevel += `
                    {
                        title: '${jtem.name}',
                        ${collapsableStr}
                        children: [
                            ${children}
                        ]
                    },
                `
            })
    
            // æ‹¼æ¥
            sidebar += `
                '/${item.name}': [
                    ${twLevel}
                ],
            `
    
        })
    }

    return [nav, sidebar]
}

// ===================================================
// ================= ** é€šç”¨å‡½æ•° ** ===================
// ===================================================

// éå†æ–‡ä»¶å¤¹ï¼Œç”Ÿæˆ çœŸå®æ–‡ä»¶å¯¹è±¡æ ‘ï¼ˆæ ¸å¿ƒæ–¹æ³•ï¼‰
function readDirToObjTree(){
    
    let foldPath = shelljs.pwd().stdout // å½“å‰ç›®å½•çš„ç»å¯¹è·¯å¾„
    let objTree = []

    function recursion (foldPath, data, isRootPath = true) {

        let files = fs.readdirSync(foldPath)
        // console.log('1ï¸âƒ£ è¯»å–æŸä¸ªç›®å½•ä¸‹çš„ç›®å½•ç»“æ„', files)
        
        // 1.ç›®å½•å¾ªç¯
        files.forEach(item => {
            // å¦‚æœæœ‰é…ç½®è¡¨ï¼Œè¿™é‡Œè¿˜éœ€è¦è¿›è¡Œé…ç½®è¿‡æ»¤ä¸€ä¸‹

            let isDir = fs.statSync(`${foldPath}/${item}`).isDirectory()
            // console.log(`â£ï¸ ${item} æ˜¯å¦æ˜¯ æ–‡ä»¶å¤¹`, isDir)

            // æ ¸å¿ƒæ•°æ®å¤„ç†ï¼ˆæ˜¯æ–‡ä»¶ï¼Œå¹¶ä¸”ä¸æ˜¯ä»¥ .å¼€å¤´çš„éšè—æ–‡ä»¶ï¼Œå¹¶ä¸”ä¸æ˜¯ node_modules && buildï¼‰
            if (isDir && !/^\./.test(item) && item !==  'node_modules' && item !==  'build') {
                // console.log('ğŸ”¥ å¯ä»¥è¿›å…¥åˆ°ç”Ÿæˆç›®å½•çš„æ–‡ä»¶å¤¹', item)
                data.push({
                    name: item,
                    data: [],
                    path: `${foldPath}/${item}`
                })
            } else if (!isRootPath) {
                // console.log('âœ… ä¸æ˜¯æ–‡ä»¶å¤¹ï¼Œå¹¶ä¸”ä¸æ˜¯ç¬¬ä¸€çº§', item)
                if (item !== '.DS_Store') data.push(item);
            }

        })

        // 2.éå†ç›®å½•å¾ªç¯ï¼ˆé€’å½’ï¼‰
        data.length > 0 && data[0].name !== undefined 
            ? data.forEach(item => recursion(item.path, item.data, false)) 
            : ''
    }

    recursion(foldPath, objTree)

    return objTree
}

// å¤åˆ¶æ–‡ä»¶å¤¹ï¼ˆå·¥å…·å‡½æ•°ï¼‰
function exists (src, dst, callback) {
    //æµ‹è¯•æŸä¸ªè·¯å¾„ä¸‹æ–‡ä»¶æ˜¯å¦å­˜åœ¨
    fs.exists(dst, function(exists){
        if (exists) {//ä¸å­˜åœ¨
            callback(src,dst);
        } else {//å­˜åœ¨
            fs.mkdir(dst,function(){//åˆ›å»ºç›®å½•
                callback(src,dst)
            })
        }
    })
}

// å¤åˆ¶æ–‡ä»¶å¤¹çš„è¾…åŠ©å‡½æ•°ï¼ˆå·¥å…·å‡½æ•°ï¼‰
function copy (src, dst) {
    //è¯»å–ç›®å½•
    let paths = fs.readdirSync(src);
    paths.forEach(function(path){
        var _src=src+'/'+path;
        var _dst=dst+'/'+path;
        var readable;
        var writable;
        stat(_src,function(err,st){
            if(err){
                throw err;
            }
            
            if(st.isFile()){
                readable=fs.createReadStream(_src);//åˆ›å»ºè¯»å–æµ
                writable=fs.createWriteStream(_dst);//åˆ›å»ºå†™å…¥æµ
                readable.pipe(writable);
            }else if(st.isDirectory()){
                exists(_src,_dst,copy);
            }
        });
    });
}
  
// åˆ é™¤æ–‡ä»¶å¤¹ï¼ˆå·¥å…·å‡½æ•°ï¼‰
function delDir(path){
    let files = [];
    if(fs.existsSync(path)){
        files = fs.readdirSync(path);
        files.forEach((file, index) => {
            let curPath = path + "/" + file;
            if(fs.statSync(curPath).isDirectory()){
                delDir(curPath); //é€’å½’åˆ é™¤æ–‡ä»¶å¤¹
            } else {
                fs.unlinkSync(curPath); //åˆ é™¤æ–‡ä»¶
            }
        });
        fs.rmdirSync(path);
    }
}

// vpe help æ˜¾ç¤ºçš„æ–‡å­—
function helpTitleFu () {
return `
__   __  _ __     ___ 
\\ \\ / / | '_ \\   / _ \\
 \\ V /  | |_) | |  __/
  \\_/   | .__/   \\___|
        |_|                                                                   

è¯´æ˜ï¼š.md ---> .htmlï¼ˆç®€åŒ–VuePressé…ç½®ï¼‰

- vpe config ç”Ÿæˆé…ç½®æ–‡ä»¶ï¼ˆä¸‰ä¸ªï¼‰
- vpe serve å¯åŠ¨é¡¹ç›®é¢„è§ˆæ•ˆæœï¼ˆç”Ÿæˆbuildæ–‡ä»¶å¤¹ï¼‰
- vpe build æ‰“åŒ…ç”Ÿæˆhtmlæ–‡ä»¶ï¼ˆç›®å½•åœ¨build/.vuepress/distï¼‰
- vpe look æŸ¥çœ‹ vuepress-es å¼€æ”¾çš„APIé…ç½®ï¼ˆæœªå¼€æ”¾ï¼‰
- vpe init ç”Ÿæˆåˆå§‹åŒ–é¡¹ç›®ï¼ˆæœªå¼€æ”¾ï¼‰
`
}

// è·å– vpe.config.json å†…å®¹
function getVpeConfig () {
    try {
        // è¯»å– vpe.config.json å†…å®¹
        var dataStr = fs.readFileSync('vpe.config.json').toString();
        return eval("("+ dataStr +")")
    } catch (e) {
        // ç”Ÿæˆé»˜è®¤é…ç½®å¯¹è±¡
        return eval("("+ vpeConfigFn() +")")
    }
}

// ç”Ÿæˆ HOME.md æ–‡ä»¶çš„å†…å®¹ && è¯»å– HOME.md
function homeTileFn () {
    try {
        // è¯»å– HOME.md å†…å®¹
        var dataStr = fs.readFileSync('ZHOME.md').toString();
        return dataStr
    } catch (e) {
return `---
# å¦‚æœä¸‹é¢æŸä¸ªæ•ˆæœä½ ä¸æƒ³ä½¿ç”¨ï¼Œç›´æ¥æ³¨é‡Šæˆ–è€…åˆ é™¤å³å¯
# æ˜¯å¦å¯åŠ¨homeé¡µé¢
home: true
# å›¾åƒ
heroImage: https://itzkp-1253302184.cos.ap-beijing.myqcloud.com/github%E5%9B%BE%E7%89%87/vuepress-es/1.HOME%E5%A4%B4%E5%83%8F%E5%9B%BE%E7%89%87.png
# æŒ‰é’®æ˜¾ç¤ºæ–‡å­—
actionText: ğŸ”¥ åœ¨ZHOME.mdä¸­è®¾ç½®è¿™é‡Œçš„æ–‡å­— â†’
# æŒ‰é’®è·³è½¬çš„è¿æ¥
actionLink: /${vpeConfigObj.folderShowOrder[0].title}/
# è§£é‡Š
features:
- title: è§£é‡Šä¸€ï¼ˆåœ¨ZHOME.mdä¸­è®¾ç½®ï¼‰ # æ ‡é¢˜
  details: è§£é‡Šä¸€å†…å®¹ # å†…å®¹
- title: è§£é‡ŠäºŒ
  details: è§£é‡ŠäºŒå†…å®¹
- title: è§£é‡Šä¸‰
  details: è§£é‡Šä¸‰å†…å®¹
# è„šå¤´
footer: MIT Licensed | Â© Copyright 2019 æœ±æ˜†é¹ - All Rights Reservedï¼ˆåœ¨ZHOME.mdä¸­è®¾ç½®ï¼‰
---`
    }
}

// ç”Ÿæˆ RECORD.md æ–‡ä»¶çš„å†…å®¹ && è¯»å– RECORD.md
function recordFn () {
    try {
        // è¯»å– HOME.md å†…å®¹
        var dataStr = fs.readFileSync('ZRECORD.md').toString();
        return dataStr
    } catch (e) {
        return `# è¿™é‡Œä¹¦å†™çš„è§„åˆ™ï¼Œå°±æ˜¯æ™®é€šçš„ .md çš„è§„åˆ™ï¼ˆå†…å®¹åœ¨ ZRECORD.md ä¸­ä¿®æ”¹ï¼‰`
    }
}